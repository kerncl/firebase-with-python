<html>
    <head>
        <meta charset='utf-8'>
        <title> Firebase Web Quickstart</title>
        <style media="screen">
        body{
            display: flex;
            min-height: 100vh;
            width: 100%;
            padding: 0;
            margin: 0;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            }
        
            #uploader {
                -webkit-appearance: none;
                appearance: none;
                width: 50%;
                margin-bottom: 10px;
            }
        </style>
    </head>
    <body>
        <progress value='0' max='100' id='uploader'>0%</progress>
        <input type="file" value='upload' id='fileButton' />

        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
             https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/6.5.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/6.5.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/6.5.0/firebase-firestore.js"></script>  
        <script src="https://www.gstatic.com/firebasejs/6.5.0/firebase-messaging.js"></script>  
        <script src="https://www.gstatic.com/firebasejs/6.5.0/firebase-storage.js"></script>   

        <script>
          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
          var firebaseConfig = {
            apiKey: "AIzaSyDjWtpIS2Mwx7N0yPItYEDbZTXLkZJtmIw",
            authDomain: "bursa-60b86.firebaseapp.com",
            databaseURL: "https://bursa-60b86.firebaseio.com",
            projectId: "bursa-60b86",
            storageBucket: "bursa-60b86.appspot.com",
            messagingSenderId: "181734006071",
            appId: "1:181734006071:web:44dd0763b6a343e6dd8eb2",
            measurementId: "G-0JNP9THHSM"
          };
          // Initialize Firebase
          firebase.initializeApp(firebaseConfig);
          //firebase.analytics();
            
            //Get elements
            var uploader = document.getElementById('uploader');
            var fileButton = document.getElementById('fileButton');

            // Listen for file selection
            fileButton.addEventListener('change', function(e){
            
                // Get file
                var file = e.target.files[0];
            
                // Create a storage ref     
                var storageRef = firebase.storage().ref('image/' + file.name);   
                
                // Upload file
                var task = storageRef.put(file);

                //update progress bar
                task.on('state_changed',
                        
                    function progress(snapshot){
                    var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100
                    uploader.value = percentage;
                    },
                       function error(err){

                    },
                        function complete(){

                    }
                );
            });
        </script>
        <script src ='/uploadimage.js'></script>
    </body>
</html>












